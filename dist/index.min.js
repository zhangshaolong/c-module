!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);class r{constructor(t){for(var e in t)this[e]=t[e]}child(t){const e=function(t){for(var e in t)this[e]=t[e]};return e.prototype=this,new e(t)}}let o=null;const i={},s={},l="c-module".toUpperCase(),u=(t,e)=>{if(o=t,e)for(let t in e)i[t]=e[t]},a=(t,e)=>{if(!o)return;let n=o(t),u=[],a=n.slice(0,2);if(n.length>2)for(let t=2;t<n.length;t++){let e=n[t],r="sync";e.constructor===Promise&&(a.push(e),r="async"),u.push({type:r,file:e})}return Promise.all(a).then(n=>{let o=e.getAttribute("c-props");o&&(o=JSON.parse(o));const a=n[0].default,c=s[t]=new a,d=(t=>{let e=t.parentNode;for(;e;){if(e.tagName===l)return s[e.getAttribute("path")];e=e.parentNode}})(e);let p;if(d){if(p=d.data.child(),c.data)for(let t in c.data)p[t]=c.data[t]}else p=new r(c.data);c.data=p,c.props=o,c.container=e,c.tpl=n[1].default,e.module=c;let f=0;return u.forEach((t,e)=>{if(i[e+2]){let r=t.file;"async"===t.type?r=n[e+2-f].default:f++,c[i[e+2]]=r}}),c.init()})},c=[],d={querys:{},start:(t,e)=>{window.addEventListener("hashchange",n=>{let r=window.location.hash;r||(r="#/");let o=r.slice(1).split("?"),i=(t=>{const e={};return t.replace(/(?:\?|&)([^=]+)=([^&$]*)/g,(t,n,r)=>{e[n]=decodeURIComponent(r)}),e})("?"+o[1]),s=o[0],l=((t,e)=>{let n=t[e];return n&&t[n]?t[n]:n})(t,s);if(l||(l=t[404]),l){d.querys=i;let t=e.getAttribute("path");e.setAttribute("path",l),t!==l?(e.module&&e.module.dispose(),a(l,e)):e.module.update({querys:i}),c.forEach(e=>{e(l,t)})}else console.log("404")},!1);const n=document.createEvent("HTMLEvents");n.initEvent("hashchange",!0,!0),window.dispatchEvent(n)},watch:t=>{c.push(t)}};function p(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(p.prototype,HTMLElement.prototype),Object.setPrototypeOf(p,HTMLElement);const f={className:(t,e)=>t.classList.contains(e),id:(t,e)=>t.getAttribute("id")===e,rule:(t,e,n)=>{let r=n.querySelectorAll(e);for(let e=0;e<r.length;e++)if(r[e]===t)return t},tag:(t,e)=>t.tagName===e.toUpperCase()},h=(t,e,n,r)=>{if(e){if(r(e,n,t))return e;if(e!==t)return h(t,e.parentNode,n,r)}};class m{constructor(){this.toBeDisposes=[]}init(){let t=this.bindEvents();t&&this.delegate(t),this.render(),this.inited()}inited(){}bindEvents(){}update(){}delegate(t){for(let e in t){let n=t[e];Array.isArray(n)||(n=[n]);const r=t=>{const e=t.target;for(let r=0;r<n.length;r++){const o=n[r],i=f[o.type];let s=h(this.container,e,o.value,i);s&&o.handler.call(this,s,t)}};this.container.addEventListener(e,r,!0),this.toBeDisposes.push(()=>{this.container.removeEventListener(e,r,!0)})}}render(t){this.tpl&&(this.container.innerHTML=this.tpl(t||this.data))}dispose(){this.toBeDisposes.forEach(t=>{t()}),this.toBeDisposes.length=0}}customElements.define("c-module",class extends p{static get observedAttributes(){return["c-props"]}constructor(){super(),this.attributeChangedTimer=null}connectedCallback(){let t=this.getAttribute("path");null!=t&&a(t,this)}disconnectedCallback(){this.module&&this.module.dispose()}attributeChangedCallback(t,e,n){clearTimeout(this.attributeChangedTimer),this.attributeChangedTimer=setTimeout(()=>{if("c-props"===t&&this.module){let t=n;t&&(t=JSON.parse(n)),this.module.update({props:t})}},0)}}),n.d(e,"Router",function(){return d}),n.d(e,"Module",function(){return m}),n.d(e,"setLoader",function(){return u}),n.d(e,"loadModule",function(){return a})}])});