!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);class n{constructor(t){for(var e in t)this[e]=t[e]}child(t){const e=function(t){for(var e in t)this[e]=t[e]};return e.prototype=this,new e(t)}}let o=null;const i={},s="c-module".toUpperCase(),u=t=>{o=t},a=(t,e)=>{if(o)return Promise.all(o(t)).then(r=>{let o=e.getAttribute("c-props");o&&(o=JSON.parse(o));const u=r[0].default,a=i[t]=new u,l=(t=>{let e=t.parentNode;for(;e;){if(e.tagName===s)return i[e.getAttribute("path")];e=e.parentNode}})(e);let c;if(l){if(c=l.data.child(),a.data)for(let t in a.data)c[t]=a.data[t]}else c=new n(a.data);return a.data=c,a.props=o,a.container=e,a.tpl=r[1].default,e.module=a,a.init()})},l=[],c={querys:{},start:(t,e)=>{window.addEventListener("hashchange",r=>{let n=window.location.hash;n||(n="#/");let o=n.slice(1).split("?"),i=(t=>{const e={};return t.replace(/(?:\?|&)([^=]+)=([^&$]*)/g,(t,r,n)=>{e[r]=decodeURIComponent(n)}),e})("?"+o[1]),s=o[0],u=((t,e)=>{let r=t[e];return r&&t[r]?t[r]:r})(t,s);if(u||(u=t[404]),u){c.querys=i;let t=e.getAttribute("path");e.setAttribute("path",u),t!==u?(e.module&&e.module.dispose(),a(u,e)):e.module.update({querys:i}),l.forEach(e=>{e(u,t)})}else console.log("404")},!1);const r=document.createEvent("HTMLEvents");r.initEvent("hashchange",!0,!0),window.dispatchEvent(r)},watch:t=>{l.push(t)}};function d(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(d.prototype,HTMLElement.prototype),Object.setPrototypeOf(d,HTMLElement);const p={className:(t,e)=>t.classList.contains(e),id:(t,e)=>t.getAttribute("id")===e,rule:(t,e,r)=>{let n=r.querySelectorAll(e);for(let e=0;e<n.length;e++)if(n[e]===t)return t},tag:(t,e)=>t.tagName===e.toUpperCase()},f=(t,e,r,n)=>{if(e){if(n(e,r,t))return e;if(e!==t)return f(t,e.parentNode,r,n)}};class h{constructor(){this.toBeDisposes=[]}init(){let t=this.bindEvents();t&&this.delegate(t),this.render(),this.inited()}inited(){}bindEvents(){}update(){}delegate(t){for(let e in t){let r=t[e];Array.isArray(r)||(r=[r]);const n=t=>{const e=t.target;for(let n=0;n<r.length;n++){const o=r[n],i=p[o.type];let s=f(this.container,e,o.value,i);s&&o.handler.call(this,s,t)}};this.container.addEventListener(e,n,!0),this.toBeDisposes.push(()=>{this.container.removeEventListener(e,n,!0)})}}render(t){this.tpl&&(this.container.innerHTML=this.tpl(t||this.data))}dispose(){this.toBeDisposes.forEach(t=>{t()}),this.toBeDisposes.length=0}}customElements.define("c-module",class extends d{static get observedAttributes(){return["c-props"]}constructor(){super(),this.attributeChangedTimer=null}connectedCallback(){let t=this.getAttribute("path");null!=t&&loaderModule(t,this)}disconnectedCallback(){this.module&&this.module.dispose()}attributeChangedCallback(t,e,r){clearTimeout(this.attributeChangedTimer),this.attributeChangedTimer=setTimeout(()=>{if("c-props"===t&&this.module){let t=r;t&&(t=JSON.parse(r)),this.module.update({props:t})}},0)}}),r.d(e,"Router",function(){return c}),r.d(e,"Module",function(){return h}),r.d(e,"setLoader",function(){return u}),r.d(e,"loadModule",function(){return a})}])});